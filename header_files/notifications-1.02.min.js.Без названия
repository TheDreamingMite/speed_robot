"use strict";function requestNotificationPermission(a){if(!1!==window._allow_notifications_&&"serviceWorker"in navigator&&"PushManager"in window&&"default"===Notification.permission){var b=localStorage.getItem("requestedNotifications");(null===b||+new Date-JSON.parse(b)>864e5)&&(localStorage.setItem("requestedNotifications",JSON.stringify(+new Date)),$.get("/services/service/RequestNotificationSubscription",{testType:a},function(a){$("body").append(a)}))}}function registerWebNotifications(){if(!1!==window._allow_notifications_&&"serviceWorker"in navigator&&"PushManager"in window&&"granted"===Notification.permission){navigator.serviceWorker.onmessage=function(a){switch(a.data.type){case"notif":$(function(){var b={public:"Editor's Pick"},c={economic:"Economic Events",earnings:"Earnings",news:"News",breaking_news:"News",analysis:"Analysis",webinar:"Webinars"};window.ga("allSitesTracker.send","event","Push Notifications",b[a.data.notif.ch]||a.data.notif.ch,c[a.data.notif.sch]||a.data.notif.sch,{dimension60:a.data.notif.rel_id,nonInteraction:!0})})}};var a=localStorage.getItem("registerWebNotifications");(null===a||+new Date-JSON.parse(a)>864e5)&&$.getScript("https://i-invdn-com.akamaized.net/js/d/register_sw-1.00.js",function(){localStorage.setItem("registerWebNotifications",JSON.stringify(+new Date))})}}registerWebNotifications(),function(){var a=sessionStorage.getItem("notifType");null===a&&(a=Math.random()>=.5?"a":"b",sessionStorage.setItem("notifType",a));var b=parseInt(sessionStorage.getItem("pv")||0);switch(sessionStorage.setItem("pv",++b+""),a){case"a":parseInt(localStorage.getItem("pages"))>=4&&requestNotificationPermission("");break;case"b":/\/(portfolio|news|members-admin|economic-calendar)/.test(window.location.href)?setTimeout(function(){requestNotificationPermission("b1")},5e3):($(function(){$(".js-add-to-portfolio").on("click",function(a){"addRow js-item"==a.target.parentNode.className&&requestNotificationPermission("b2")}),$(".js-add-alert-widget").on("click",function(a){"footer footerContent"==a.target.parentNode.className&&"A"==a.target.tagName&&"javascript:"==a.target.protocol&&requestNotificationPermission("b2")})}),b>=5&&setTimeout(function(){requestNotificationPermission("b3")},5e3))}}();/**|**/